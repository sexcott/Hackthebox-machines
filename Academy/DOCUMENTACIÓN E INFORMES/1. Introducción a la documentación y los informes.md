Las sólidas habilidades de documentación e informes son increíblemente beneficiosas en cualquier área de la tecnología de la información o la seguridad de la información, y dominar estas habilidades puede ayudarnos a progresar rápidamente en nuestras carreras. Ser altamente técnico es excelente y esencial, pero sin habilidades sociales que respalden nuestras habilidades técnicas, no seremos tan efectivos ya sea que escribamos políticas y procedimientos internos, documentación técnica, informes de pruebas de penetración u otros tipos de entregables para el cliente.

No existe una solución única para tomar notas y preparar informes, pero existen principios fundamentales que se deben seguir para tener éxito. Este módulo explorará diferentes estilos de herramientas para tomar notas, organizará nuestra evidencia en nuestra máquina virtual de prueba, redactará resúmenes ejecutivos para audiencias no técnicas y documentará cadenas de ataques y hallazgos técnicos. Intentamos proporcionar una fórmula genérica que cualquiera pueda usar para lograr el éxito, al mismo tiempo que agregamos consejos, trucos y mejores prácticas que hemos aprendido durante aproximadamente 25 años combinados en diversos roles gerenciales y de consultoría técnica de cara al cliente.

Una consideración crucial para nosotros como evaluadores es que una prueba de penetración es una instantánea en el tiempo del estado de seguridad de la red objetivo. Deberíamos incluir una sección de descripción general en nuestro informe que hable sobre el tipo de trabajo realizado, quién lo realizó, las direcciones IP de origen utilizadas en las pruebas y cualquier consideración especial (es decir, pruebas realizadas de forma remota a través de VPN o desde un host dentro de la red del cliente). . Esta descripción general también debe indicar que nuestras pruebas se realizaron durante un período específico y que cualquier cambio en los sistemas dentro del alcance y las vulnerabilidades resultantes no se reflejarían en este informe. Podríamos decir: "Todas las actividades de prueba se realizaron entre el 7 de enero de 2022 y el 19 de enero de 2022". También podríamos agregar un descargo de responsabilidad, como "Este informe representa una instantánea en el tiempo durante el período de prueba antes mencionado, y Acme Consulting, LLC no puede dar fe del estado de ningún activo de información propiedad del cliente fuera de este período de prueba".
## Documentación e informes en la práctica

Quizás esté pensando " `this will be a boring module.`" o " `how could we possibly make an entire course on this topic?`". Si bien la documentación y los informes no son el tema más interesante y ciertamente no son tan satisfactorios como armar una caja o obtener DA en un laboratorio o en una red del mundo real, estas son habilidades críticas para cualquiera que desempeñe un rol de consultoría. A continuación se muestran algunos ejemplos de ocasiones en nuestras carreras en las que una documentación clara y exhaustiva y unos informes detallados nos rescataron de lo que podría haberse convertido en una situación bastante desagradable.

**Escenario 1: el caso de una máquina virtual que explota**

Durante un compromiso particularmente largo (una prueba de penetración externa de casi un mes), me registré por ese día y mi máquina virtual no se cargaba correctamente. Pasé un tiempo intentando recuperar el sistema de archivos, pero desapareció por completo. Afortunadamente, había estado tomando notas excelentes y detalladas del proyecto utilizando una copia local de OneNote en mi estación de trabajo base. En ese momento, mi equipo usaba una solución de almacenamiento compartido para todos los proyectos y teníamos un script automatizado para sincronizar nuestros datos y compartirlos al final de las pruebas, tanto para fines de control de calidad como de archivo. Siguiendo un consejo de un compañero de equipo de mayor rango, había estado haciendo una copia de seguridad de la evidencia de mis pruebas en este archivo compartido al final de cada día laboral. Por lo tanto, una vez que construí una nueva máquina virtual (a partir de una plantilla que conservé), todo lo que tuve que hacer fue sincronizar los datos de mi proyecto y pude volver a realizar pruebas sin interrupciones. Si no hubiera seguido un proceso definido, el resultado podría haber sido catastrófico, perdiendo semanas de trabajo y potencialmente perdiendo un cliente para la empresa o incluso mi trabajo.

**Escenario 2: Ping de la muerte**

Sabía que esta prueba de penetración interna sería difícil desde la llamada de alcance inicial. Un miembro del equipo interno de TI del cliente fue muy hostil y cuestionó todo, sospechó de las habilidades del equipo y fue muy protector con un conjunto de servidores críticos (cuyas direcciones IP no estaban dentro del alcance de la prueba). Durante la fase de enumeración de las pruebas, recibí un correo electrónico y una llamada del cliente pidiendo que detuviéramos todas las pruebas, ya que habíamos desactivado varios servidores críticos que eran sensibles a cualquier tipo de análisis. Produje todos los datos de registro, archivos de alcance y datos de escaneo sin procesar con marca de tiempo. Las direcciones IP de los hosts afectados estaban en mis escaneos, pero también estaban incluidas en el archivo de alcance, que el cliente había confirmado. En este caso, no había hecho nada malo mientras estaba probando el alcance que me dieron (y confirmó) y no había realizado ninguna actividad de prueba imprudente. Sin embargo, aprendí una lección que agregué a mis procesos. Después de esto, me aseguré de pedir a los clientes una lista específica de direcciones IP individuales y nombres de host que deberían excluirse explícitamente de cualquier análisis u otra actividad de prueba. En esta situación, tenía documentación sólida para respaldar las actividades que se habían realizado y una confirmación por escrito de los rangos de direcciones IP dentro del alcance del cliente. Sin embargo, encontré una oportunidad para perfeccionar aún más mis procesos y crecer como consultor.

**Escenario 3: Lento como la melaza**

En este último ejemplo, estaba realizando una prueba de penetración interna en el edificio de la sede de un cliente, sentado en un área de la oficina donde se sentaba el personal de TI. Sentado detrás de mí estaba un administrador de red particularmente hostil que se había mostrado escéptico sobre nuestras capacidades y herramientas desde la llamada inicial, afirmando que las pruebas de penetración anteriores de otras compañías habían ralentizado enormemente la red debido a evaluadores imprudentes y sin experiencia. Menos de 20 minutos después de la prueba, este administrador de red había enviado correos electrónicos a toda la lista de distribución y se acercó a mi escritorio para decirme que nuestros escaneos habían detenido la red y que había bloqueado nuestras direcciones IP de origen. Luego realizamos un ejercicio de compartir nuestros resultados de escaneo, demostrando que habíamos seguido las mejores prácticas y que nada de lo que habíamos hecho explicaría la desaceleración de la red. Mientras tanto, otro administrador determinó que el modo de depuración se había habilitado en todos los dispositivos de red, lo que, combinado con los escaneos normales de Nmap, fue suficiente para abrumar a los dispositivos y causar ralentizaciones. Una vez que esto se deshabilitó, las pruebas continuaron sin problemas. En este caso, nuestra documentación respaldó nuestras acciones y obligó al cliente a investigar más a fondo. Si no hubiéramos tenido documentación (o deficiente), entonces fácilmente se nos podría haber echado la culpa a nosotros, y esto podría haber impactado en gran medida la relación con el cliente y nuestra reputación.

Estas historias ilustran la importancia de una documentación sólida. Necesitamos poder justificar nuestras acciones y, si nos lo solicitan, poder presentar evidencia para que el cliente intente solucionar un problema. No es raro que cualquier problema de red durante una prueba de penetración se atribuya al evaluador, independientemente de si es resultado de sus actividades. Queremos estar en una posición fuerte para cubrirnos y ayudar a nuestros clientes. Además, nunca queremos tener que volver a hacer las pruebas después de perder evidencia o pedirle más tiempo a un cliente porque no fuimos diligentes en nuestra toma de notas y organización.

## Acerca de este módulo

Hemos incluido un cuaderno de muestra de Obsidian y un informe de prueba de penetración interna de muestra (en formato MS Word y PDF - contraseña zip `hackthebox`) que se pueden descargar desde la `Resources`pestaña en la parte superior derecha de esta o cualquier otra sección del módulo. Estos son excelentes recursos complementarios para ustedes mismos, pero también son útiles para tenerlos a mano mientras trabajan en el contenido.

Hay muchas oportunidades en este módulo para practicar las habilidades que se enseñan, pero ninguna de ellas es obligatoria para completar el módulo. Para aprovechar al máximo este módulo, recomendamos (obviamente) tomar notas detalladas y utilizar los consejos y trucos para ver dónde pueden haber agujeros o ineficiencias en sus procesos. Una vez que resuelva esto, esperamos que encuentre maneras de ser más productivo y reducir la carga de presentación de informes porque, seamos honestos, a nadie le gusta informar; lo toleramos como un mal necesario. Una vez que haya terminado con este módulo, vale la pena practicar estos consejos en compromisos del mundo real o, si aún no está trabajando en una función de consultoría, practique sus habilidades de documentación e informes en laboratorios y objetivos de capacitación.

Incluimos un host de ataque preconfigurado y un pequeño laboratorio con este módulo que puede utilizar para simular una prueba de penetración interna. Aproveche esto y úselo para practicar todo lo que quiera hasta que se sienta cómodo identificando todos los hallazgos y desarrolle un estilo de documentación que se adapte a su flujo de trabajo.

	A lo largo del módulo, es posible que nos vea utilizando términos como "interno" o "externo". En estos casos nos referimos a un Test de Penetración Interna o Test de Penetración Externa, respectivamente.

Hemos tratado de hacer que este tema típicamente aburrido sea más atractivo de lo habitual, así que abróchate el cinturón. ¡Será un viaje salvaje por la madriguera de la documentación y los informes!